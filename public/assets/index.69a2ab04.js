var V=Object.defineProperty;var k=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var D=(t,e,o)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,x=(t,e)=>{for(var o in e||(e={}))L.call(e,o)&&D(t,o,e[o]);if(k)for(var o of k(e))O.call(e,o)&&D(t,o,e[o]);return t};import{r as c,o as u,c as d,a as p,w as $,F as m,b as _,t as h,d as T,e as i,f as v,v as b,g as F,h as N,i as w,j as I,C as E,k as P,l as U,D as J,B as R,m as z,n as M,p as S,q as H,s as j,u as q}from"./vendor.425722bc.js";const Z=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};Z();var f=(t,e)=>{const o=t.__vccOpts||t;for(const[a,n]of e)o[a]=n;return o};const K={},W=_("Toys"),G=_("| "),Q=_("Chart");function X(t,e){const o=c("router-link");return u(),d(m,null,[p(o,{to:"/"},{default:$(()=>[W]),_:1}),G,p(o,{to:"/toy/chart"},{default:$(()=>[Q]),_:1})],64)}var Y=f(K,[["render",X]]);const ee={props:{toy:Object},methods:{removeToy(t){this.$emit("toy-remove",t)}}},te=_(`\r
`),oe=_(`\r
        `),re=_(`\r
        `),ne=_("Details"),se=_(`\r
    `);function le(t,e,o,a,n,r){const s=c("router-link");return u(),d("pre",null,[te,p(s,{to:"/edit/"+o.toy._id},{default:$(()=>[_(h(o.toy.name)+" ",1)]),_:1},8,["to"]),_("  | "+h(o.toy.price)+" | ",1),(u(!0),d(m,null,T(o.toy.labels,y=>(u(),d("span",{key:y},h(y)+",",1))),128)),oe,i("button",{onClick:e[0]||(e[0]=y=>r.removeToy(o.toy._id))},"Remove"),re,p(s,{to:"/toy/"+o.toy._id},{default:$(()=>[ne]),_:1},8,["to"]),se])}var ie=f(ee,[["render",le]]);const ae={props:{toys:Array},components:{toyPreview:ie},methods:{removeToy(t){this.$emit("toy-remove",t)}}};function ue(t,e,o,a,n,r){const s=c("toy-preview");return u(),d("section",null,[i("ul",null,[(u(!0),d(m,null,T(o.toys,y=>(u(),d("li",{key:y._id},[p(s,{onToyRemove:r.removeToy,toy:y},null,8,["onToyRemove","toy"])]))),128))])])}var de=f(ae,[["render",ue]]);const ye={data(){return{filterBy:{name:"",labels:[]}}},methods:{setFilter(){console.log(this.filterBy),this.$emit("filter-set",x({},this.filterBy))},setSort(t){this.$emit("sort-set",t)}},computed:{labels(){return this.$store.getters.toyLabels}}},ce=i("h2",null,"Filter:",-1),pe=i("h2",null,"Sort:",-1),me=i("label",{for:"sortA-Z"},"ABC",-1),_e=i("label",{for:"sortPrice"},"Price",-1);function fe(t,e,o,a,n,r){const s=c("el-option"),y=c("el-select");return u(),d("section",null,[ce,v(i("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>n.filterBy.name=l),onInput:e[1]||(e[1]=(...l)=>r.setFilter&&r.setFilter(...l))},null,544),[[b,n.filterBy.name]]),p(y,{onChange:r.setFilter,multiple:"",modelValue:n.filterBy.labels,"onUpdate:modelValue":e[2]||(e[2]=l=>n.filterBy.labels=l),class:"m-2",placeholder:"Select",size:"large"},{default:$(()=>[(u(!0),d(m,null,T(r.labels,l=>(u(),F(s,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"]),pe,i("input",{type:"radio",name:"sortInput",id:"sortA-Z",onInput:e[3]||(e[3]=l=>r.setSort("abc"))},null,32),me,i("input",{type:"radio",name:"sortInput",id:"sortPrice",onInput:e[4]||(e[4]=l=>r.setSort("price"))},null,32),_e])}var he=f(ye,[["render",fe]]);const ve={data(){return{toy:{name:"",price:null,labels:[],inStock:!0}}},methods:{addToy(){this.toy.createdAt=Date.now(),this.$emit("toy-add",JSON.parse(JSON.stringify(this.toy)))}},computed:{labels(){return this.$store.getters.toyLabels}}},Te=i("button",null,"Save",-1);function be(t,e,o,a,n,r){const s=c("el-option"),y=c("el-select");return u(),d("form",{onSubmit:e[4]||(e[4]=w((...l)=>r.addToy&&r.addToy(...l),["prevent"]))},[v(i("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>n.toy.name=l)},null,512),[[b,n.toy.name]]),v(i("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=l=>n.toy.price=l)},null,512),[[b,n.toy.price]]),v(i("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=l=>n.toy.inStock=l)},null,512),[[N,n.toy.inStock]]),p(y,{multiple:"",modelValue:n.toy.labels,"onUpdate:modelValue":e[3]||(e[3]=l=>n.toy.labels=l),class:"m-2",placeholder:"Select",size:"large"},{default:$(()=>[(u(!0),d(m,null,T(r.labels,l=>(u(),F(s,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Te],32)}var $e=f(ve,[["render",be]]);const ge={components:{toyList:de,toyFilter:he,toyAdd:$e},computed:{toys(){return this.$store.getters.filteredToys}},methods:{addToy(t){this.$store.dispatch({type:"addToy",toyToAdd:t})},removeToy(t){this.$store.dispatch({type:"removeToy",toyId:t})},setFilter(t){this.$store.commit({type:"setFilter",filterBy:t})},setSort(t){this.$store.commit({type:"setSort",sortBy:t})}}};function Se(t,e,o,a,n,r){const s=c("toy-filter"),y=c("toy-list"),l=c("toy-add");return u(),d(m,null,[p(s,{onSortSet:r.setSort,onFilterSet:r.setFilter},null,8,["onSortSet","onFilterSet"]),p(y,{onToyRemove:r.removeToy,toys:r.toys},null,8,["onToyRemove","toys"]),p(l,{onToyAdd:r.addToy},null,8,["onToyAdd"])],64)}var A=f(ge,[["render",Se]]);const Be={created(){this.$store.dispatch("loadToys")},components:{appHeader:Y,toyApp:A}};function Ce(t,e,o,a,n,r){const s=c("app-header"),y=c("router-view");return u(),d(m,null,[p(s),p(y)],64)}var xe=f(Be,[["render",Ce]]);const ke={data(){return{}},created(){this.$store.dispatch({type:"setCurrToy",id:this.$route.params.toyId})},methods:{editToy(){this.$store.dispatch({type:"editToy",toy:this.toy}).then(()=>this.$router.push("/"))}},computed:{toy(){return this.$store.getters.currToy}}},De={key:0},Fe=["onUpdate:modelValue"],we=i("button",null,"Submit",-1);function Ae(t,e,o,a,n,r){return r.toy?(u(),d("section",De,[i("form",{onSubmit:e[2]||(e[2]=w((...s)=>r.editToy&&r.editToy(...s),["prevent"]))},[v(i("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>r.toy.name=s)},null,512),[[b,r.toy.name]]),v(i("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=s=>r.toy.price=s)},null,512),[[b,r.toy.price]]),(u(!0),d(m,null,T(r.toy.labels,(s,y)=>(u(),d("span",{key:s},[v(i("input",{type:"text","onUpdate:modelValue":l=>r.toy.labels[y]=l},null,8,Fe),[[b,r.toy.labels[y]]])]))),128)),we],32)])):I("",!0)}var Ve=f(ke,[["render",Ae]]);const Le={created(){this.$store.dispatch({type:"setCurrToy",id:this.$route.params.toyId})},computed:{toy(){return this.$store.getters.currToy},toyCreated(){return new Date(this.toy.createdAt)}}},Oe=i("h3",null,"Labels:",-1),Ne=i("h3",null,"Reviews:",-1);function Ie(t,e,o,a,n,r){return u(),d("section",null,[i("h2",null,h(r.toy.name),1),i("h4",null,"Price: "+h(r.toy.price),1),i("h4",null,"Created At: "+h(r.toyCreated),1),Oe,i("ul",null,[(u(!0),d(m,null,T(r.toy.labels,s=>(u(),d("li",{key:s},[i("p",null,h(s),1)]))),128))]),Ne,i("ul",null,[(u(!0),d(m,null,T(r.toy.reviews,s=>(u(),d("li",{key:s},[i("p",null,h(s),1)]))),128))])])}var Ee=f(Le,[["render",Ie]]);E.register(...P);const Pe=U({name:"charts",components:{DoughnutChart:J,BubbleChart:R},data(){return{pricesData:{labels:[],datasets:[{data:[0,0,0,0,0],backgroundColor:["#77CEFF","#0079AF","#123E6B","#97B0C4","#A5C8ED"]}]}}},created(){this.toys.forEach(t=>{t.labels.forEach(e=>{e&&!this.pricesData.labels.includes(e)&&this.pricesData.labels.push(e)})}),this.pricesData.labels.forEach((t,e)=>{this.toys.forEach(o=>{o.labels.includes(t)&&(this.pricesData.datasets[0].data[e]+=o.price)})})},methods:{},computed:{toys(){return this.$store.getters.toysForDisplay}}}),Ue=i("h1",null,"Prices By Toy Labels:",-1);function Je(t,e,o,a,n,r){const s=c("DoughnutChart");return u(),d("div",null,[Ue,p(s,{chartData:t.pricesData},null,8,["chartData"])])}var Re=f(Pe,[["render",Je]]);const ze=z({history:M("/"),routes:[{path:"/",name:"toyApp",component:A},{path:"/edit/:toyId",name:"toyEdit",component:Ve},{path:"/toy/:toyId",name:"toyDetails",component:Ee},{path:"/toy/chart",name:"toyChart",component:Re}]}),g={loadToys:Me,removeToy:qe,save:je,getToyById:He},B="/api/toy";function Me(){return S.get(B).then(t=>t.data)}function He(t){return S.get(B+t).then(e=>e.data)}function je(t){return(t._id?S.put(B,t):S.post(B,t)).then(o=>o.data)}function qe(t){return S.delete(B+t)}const Ze={state(){return{currToy:null,toys:[],filterBy:null,sortBy:null}},mutations:{loadToys(t,{toys:e}){t.toys=e},removeToy(t,{toyId:e}){const o=t.toys.findIndex(a=>a._id===e);t.toys.splice(o,1)},setFilter(t,{filterBy:e}){t.filterBy=e},addToy(t,{newToy:e}){t.toys.unshift(e)},editToy(t,{toy:e}){const o=t.toys.findIndex(a=>a._id===e._id);t.toys.splice(o,1,e)},setCurrToy(t,{toy:e}){t.currToy=x({},e)},setSort(t,{sortBy:e}){t.sortBy=e}},actions:{loadToys({commit:t}){g.loadToys().then(e=>{t({type:"loadToys",toys:e})})},removeToy({commit:t},{toyId:e}){g.removeToy(e).then(()=>{t({type:"removeToy",toyId:e})})},addToy({commit:t},{toyToAdd:e}){g.save(e).then(o=>{t({type:"addToy",newToy:o})})},editToy({commit:t},{toy:e}){return g.save(e).then(o=>{t({type:"editToy",toy:o})})},setCurrToy({commit:t},{id:e}){return g.getToyById(e).then(o=>t({type:"setCurrToy",toy:o}))}},getters:{filteredToys(t){if(!t.toys)return;let e=JSON.parse(JSON.stringify(t.toys));if(!t.filterBy&&!t.sortBy)return e;if(t.filterBy){if(t.filterBy.name){const o=new RegExp(t.filterBy.name,"i");e=e.filter(a=>o.test(a.name))}t.filterBy.labels&&(e=e.filter(o=>t.filterBy.label?o.labels.includes(t.filterBy.label):""))}return t.sortBy==="abc"?e.sort((o,a)=>o.name.toLowerCase()<a.name.toLowerCase()?-1:o.name.toLowerCase()>a.name.toLowerCase()?1:0):e.sort((o,a)=>o.price-a.price),e},toysForDisplay(t){return JSON.parse(JSON.stringify(t.toys))},currToy(t){return JSON.parse(JSON.stringify(t.currToy))},toyLabels(){return["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"]}}},Ke=H({strict:!0,modules:{toyStore:Ze}});const C=j(xe);C.use(q);C.use(ze);C.use(Ke);C.mount("#app");
