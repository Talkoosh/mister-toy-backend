var j=Object.defineProperty;var I=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var E=(t,e,o)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,D=(t,e)=>{for(var o in e||(e={}))q.call(e,o)&&E(t,o,e[o]);if(I)for(var o of I(e))z.call(e,o)&&E(t,o,e[o]);return t};import{r as h,o as d,c,a as i,t as g,b as u,w as m,d as T,e as f,F as b,f as U,g as H,h as R,i as $,v as k,j as G,k as x,l as K,m as Z,C as W,n as Y,p as Q,D as X,B as ee,q as te,s as oe,u as se,x as re,y as ne}from"./vendor.b9b0e772.js";const ie=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}};ie();var v=(t,e)=>{const o=t.__vccOpts||t;for(const[l,r]of e)o[l]=r;return o};const le={props:{user:Object},computed:{isAdmin(){return this.user.isAdmin}},methods:{logout(){this.$emit("logout")}}},ue={class:"app-header"},ae={key:0},de=f("Logout"),ce={class:"header-links"},ye=f("Toys"),pe=f("Chart");function me(t,e,o,l,r,s){const n=h("el-button"),y=h("router-link");return d(),c("section",ue,[o.user?(d(),c("div",ae,[i("h1",null,"Hello "+g(o.user.fullname),1),u(n,{type:"primary",onClick:s.logout},{default:m(()=>[de]),_:1},8,["onClick"])])):T("",!0),i("div",ce,[u(y,{to:"/toy"},{default:m(()=>[ye]),_:1}),u(y,{to:"/toy/chart"},{default:m(()=>[pe]),_:1})])])}var he=v(le,[["render",me]]);const ge={props:{toy:Object},methods:{removeToy(t){this.$emit("toy-remove",t)}}},fe=f("        "),_e=f(`
        `),ve=f(`
        `),we=f("Details"),be=f(`
    `);function Se(t,e,o,l,r,s){const n=h("router-link");return d(),c("pre",null,[fe,u(n,{to:"/edit/"+o.toy._id},{default:m(()=>[f(g(o.toy.name)+" ",1)]),_:1},8,["to"]),f("  | "+g(o.toy.price)+" | ",1),(d(!0),c(b,null,U(o.toy.labels,y=>(d(),c("span",{key:y},g(y)+",",1))),128)),_e,i("button",{onClick:e[0]||(e[0]=y=>s.removeToy(o.toy._id))},"Remove"),ve,u(n,{to:"/toy/"+o.toy._id},{default:m(()=>[we]),_:1},8,["to"]),be])}var Te=v(ge,[["render",Se]]);const $e={props:{toys:Array},data(){return{drag:!1}},components:{toyPreview:Te,draggable:H},methods:{removeToy(t){this.$emit("toy-remove",t)},setToysOrder(){}}},Ue={key:0};function ke(t,e,o,l,r,s){const n=h("toy-preview"),y=h("draggable");return o.toys?(d(),c("section",Ue,[u(y,{onEnd:s.setToysOrder,modelValue:o.toys,"onUpdate:modelValue":e[0]||(e[0]=a=>o.toys=a),"item-key":"_id"},{item:m(({element:a})=>[u(n,{class:"toy-card",onToyRemove:s.removeToy,toy:a},null,8,["onToyRemove","toy"])]),_:1},8,["onEnd","modelValue"])])):T("",!0)}var xe=v($e,[["render",ke]]);const Ce={data(){return{filterBy:{name:"",inStock:!0,labels:[]}}},methods:{setFilter(){this.$emit("filter-set",D({},this.filterBy))},setSort(t){this.$emit("sort-set",t)}},computed:{labels(){return this.$store.getters.toyLabels}},watch:{"filterBy.inStock"(){this.setFilter()}}},Ve={class:"toy-filter"},Be=i("h2",null,"Filter:",-1),Le=i("h2",null,"Sort:",-1),Re=i("label",{for:"sortA-Z"},"ABC",-1),Fe=i("label",{for:"sortPrice"},"Price",-1);function De(t,e,o,l,r,s){const n=h("el-input"),y=h("el-option"),a=h("el-select"),V=h("el-checkbox");return d(),c("section",Ve,[Be,i("div",null,[u(n,{modelValue:r.filterBy.name,"onUpdate:modelValue":e[0]||(e[0]=p=>r.filterBy.name=p),placeholder:"Please input",onInput:s.setFilter,clearable:""},null,8,["modelValue","onInput"]),u(a,{onChange:s.setFilter,multiple:"",modelValue:r.filterBy.labels,"onUpdate:modelValue":e[1]||(e[1]=p=>r.filterBy.labels=p),class:"m-2",placeholder:"Select",size:"large"},{default:m(()=>[(d(!0),c(b,null,U(s.labels,p=>(d(),R(y,{key:p,label:p,value:p},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"]),u(V,{modelValue:r.filterBy.inStock,"onUpdate:modelValue":e[2]||(e[2]=p=>r.filterBy.inStock=p),label:"in stock",size:"large"},null,8,["modelValue"])]),Le,i("div",null,[i("input",{type:"radio",name:"sortInput",id:"sortA-Z",onInput:e[3]||(e[3]=p=>s.setSort("abc"))},null,32),Re,i("input",{type:"radio",name:"sortInput",id:"sortPrice",onInput:e[4]||(e[4]=p=>s.setSort("price"))},null,32),Fe])])}var Ie=v(Ce,[["render",De]]);const Ee={data(){return{toy:{name:"",price:null,labels:[],inStock:!0}}},methods:{addToy(){this.toy.createdAt=Date.now(),this.$emit("toy-add",JSON.parse(JSON.stringify(this.toy)))}},computed:{labels(){return this.$store.getters.toyLabels}}},Oe=i("button",null,"Save",-1);function Ae(t,e,o,l,r,s){const n=h("el-option"),y=h("el-select");return d(),c("form",{onSubmit:e[4]||(e[4]=x((...a)=>s.addToy&&s.addToy(...a),["prevent"]))},[$(i("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>r.toy.name=a)},null,512),[[k,r.toy.name]]),$(i("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=a=>r.toy.price=a)},null,512),[[k,r.toy.price]]),$(i("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>r.toy.inStock=a)},null,512),[[G,r.toy.inStock]]),u(y,{multiple:"",modelValue:r.toy.labels,"onUpdate:modelValue":e[3]||(e[3]=a=>r.toy.labels=a),class:"m-2",placeholder:"Select",size:"large"},{default:m(()=>[(d(!0),c(b,null,U(s.labels,a=>(d(),R(n,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Oe],32)}var Me=v(Ee,[["render",Ae]]);const Ne={components:{toyList:xe,toyFilter:Ie,toyAdd:Me},computed:{toys(){return this.$store.getters.filteredToys}},methods:{addToy(t){this.$store.dispatch({type:"addToy",toyToAdd:t})},removeToy(t){this.$store.dispatch({type:"removeToy",toyId:t})},setFilter(t){this.$store.commit({type:"setFilter",filterBy:t})},setSort(t){this.$store.commit({type:"setSort",sortBy:t})}}},Pe={class:"main"};function Je(t,e,o,l,r,s){const n=h("toy-filter"),y=h("toy-list"),a=h("toy-add");return d(),c("section",Pe,[u(n,{onSortSet:s.setSort,onFilterSet:s.setFilter},null,8,["onSortSet","onFilterSet"]),u(y,{onToyRemove:s.removeToy,toys:s.toys},null,8,["onToyRemove","toys"]),u(a,{onToyAdd:s.addToy},null,8,["onToyAdd"])])}var M=v(Ne,[["render",Je]]);const je={created(){this.$store.dispatch("loadToys"),this.$store.dispatch("loadUser")},components:{appHeader:he,toyApp:M},computed:{user(){return this.$store.getters.currUser}},methods:{async logout(){await this.$store.dispatch("logout"),this.$router.push("/")}}};function qe(t,e,o,l,r,s){const n=h("app-header"),y=h("router-view");return d(),c(b,null,[u(n,{onLogout:s.logout,user:s.user},null,8,["onLogout","user"]),u(y)],64)}var ze=v(je,[["render",qe]]);const He={data(){return{isLogin:!1,userSignup:{fullname:"",username:"",password:""},userLogin:{username:"",password:""}}},methods:{async signup(){try{await this.$store.dispatch({type:"signup",newUser:this.userSignup}),this.$router.push("/toy")}catch(t){this.$router.push("/"),console.log(t)}},async login(){try{await this.$store.dispatch({type:"login",loginUser:this.userLogin}),this.$router.push("/toy")}catch(t){this.$router.push("/"),console.log(t);return}}}},Ge={class:"login-screen-btns"},Ke=f("Login"),Ze=f("Sign Up"),We=i("h1",null,"Login!",-1),Ye=i("input",{class:"submit-input",type:"submit",value:"Login"},null,-1),Qe=i("h1",null,"Sign Up!",-1),Xe={class:"form-btn-conainter"},et=i("input",{class:"submit-input",type:"submit",value:"Sign Up"},null,-1);function tt(t,e,o,l,r,s){const n=h("el-button"),y=h("el-input"),a=h("el-form-item"),V=h("el-form");return d(),c(b,null,[i("div",Ge,[u(n,{onClick:e[0]||(e[0]=p=>r.isLogin=!0),type:"primary"},{default:m(()=>[Ke]),_:1}),u(n,{onClick:e[1]||(e[1]=p=>r.isLogin=!1),type:"success"},{default:m(()=>[Ze]),_:1})]),r.isLogin?(d(),R(V,{key:0,"status-icon":"","label-width":"120px",class:"form login-form",onSubmit:e[4]||(e[4]=x(p=>s.login(),["prevent"]))},{default:m(()=>[We,u(a,{label:"Username"},{default:m(()=>[u(y,{modelValue:r.userLogin.username,"onUpdate:modelValue":e[2]||(e[2]=p=>r.userLogin.username=p),type:"text",autocomplete:"off",required:""},null,8,["modelValue"])]),_:1}),u(a,{label:"password",prop:"pass"},{default:m(()=>[u(y,{type:"password",modelValue:r.userLogin.password,"onUpdate:modelValue":e[3]||(e[3]=p=>r.userLogin.password=p),modelModifiers:{number:!0},required:""},null,8,["modelValue"])]),_:1}),u(a,null,{default:m(()=>[u(n,{class:"form-btn",type:"primary"},{default:m(()=>[Ye]),_:1})]),_:1})]),_:1})):T("",!0),r.isLogin?T("",!0):(d(),R(V,{key:1,"status-icon":"","label-width":"120px",class:"form signup-form",onSubmit:e[8]||(e[8]=x(p=>s.signup(),["prevent"]))},{default:m(()=>[Qe,u(a,{label:"Full Name"},{default:m(()=>[u(y,{modelValue:r.userSignup.fullname,"onUpdate:modelValue":e[5]||(e[5]=p=>r.userSignup.fullname=p),type:"text",autocomplete:"off",required:""},null,8,["modelValue"])]),_:1}),u(a,{label:"Username"},{default:m(()=>[u(y,{modelValue:r.userSignup.username,"onUpdate:modelValue":e[6]||(e[6]=p=>r.userSignup.username=p),type:"text",autocomplete:"off",required:""},null,8,["modelValue"])]),_:1}),u(a,{label:"password",prop:"pass"},{default:m(()=>[u(y,{type:"password",modelValue:r.userSignup.password,"onUpdate:modelValue":e[7]||(e[7]=p=>r.userSignup.password=p),required:""},null,8,["modelValue"])]),_:1}),i("div",Xe,[u(a,null,{default:m(()=>[u(n,{class:"form-btn",type:"success"},{default:m(()=>[et]),_:1})]),_:1})])]),_:1}))],64)}var ot=v(He,[["render",tt]]);const st={data(){return{}},created(){this.$store.dispatch({type:"setCurrToy",id:this.$route.params.toyId})},methods:{editToy(){this.$store.dispatch({type:"editToy",toy:this.toy}).then(()=>this.$router.push("/"))}},computed:{toy(){return this.$store.getters.currToy}}},rt={key:0,class:"main"},nt=["onUpdate:modelValue"],it=i("button",null,"Submit",-1);function lt(t,e,o,l,r,s){return s.toy?(d(),c("section",rt,[i("form",{onSubmit:e[2]||(e[2]=x((...n)=>s.editToy&&s.editToy(...n),["prevent"]))},[$(i("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>s.toy.name=n)},null,512),[[k,s.toy.name]]),$(i("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=n=>s.toy.price=n)},null,512),[[k,s.toy.price]]),(d(!0),c(b,null,U(s.toy.labels,(n,y)=>(d(),c("span",{key:n},[$(i("input",{type:"text","onUpdate:modelValue":a=>s.toy.labels[y]=a},null,8,nt),[[k,s.toy.labels[y]]])]))),128)),it],32)])):T("",!0)}var ut=v(st,[["render",lt]]);const O="/api/";var at=K.create({withCredentials:!0});const _={get(t,e){return B(t,"GET",e)},post(t,e){return B(t,"POST",e)},put(t,e){return B(t,"PUT",e)},delete(t,e){return B(t,"DELETE",e)}};async function B(t,e="GET",o=null){try{return(await at({url:`${O}${t}`,method:e,data:o,params:e==="GET"?o:null})).data}catch(l){throw console.log(`Had Issues ${e}ing to the backend, endpoint: ${O}${t}, with data:`,o),console.dir(l),l.response&&l.response.status===401&&N.push("/login"),l}}const S={addMsg:"chat newMsg",chatEnter:"chat topic",getMsg:"chat addMsg",currUserTyping:"user-typing",showUserTyping:"show-user-typing",deleteMsg:"delete-typing-msg",finishedTyping:"finished-typing",getChat:"get chat"},dt="",w=ct();function ct(){var t=null;return{async setup(){t=Z(dt)},on(o,l){t.on(o,l)},off(o,l=null){!t||(l?t.off(o,l):t.removeAllListeners(o))},emit(o,l){console.log(o,l),t.emit(o,l)},terminate(){t=null}}}const yt={data(){return{review:{txt:""},msg:{from:"",txt:""},msgs:[],typingUser:""}},async created(){await this.$store.dispatch({type:"setCurrToy",id:this.$route.params.toyId});const t=this.$store.getters.currToy._id;await this.$store.dispatch({type:"loadToyReviews",toyId:t}),await w.setup(),w.emit(S.chatEnter,this.toy._id),w.on(S.getChat,this.setChat),w.on(S.getMsg,this.addMsg),w.on(S.showUserTyping,this.setUserTyping),w.on(S.deleteMsg,this.setUserTyping)},computed:{toy(){return this.$store.getters.currToy},toyCreated(){return new Date(this.toy.createdAt)},reviews(){return this.$store.getters.reviewsForDisplay},userFullname(){return this.$store.getters.currUser.fullname},typingUserMsg(){return this.typingUser?`${this.typingUser} is typing...`:""}},methods:{addReview(){this.review.toyId=this.toy._id,console.log(this.review),this.$store.dispatch({type:"addReview",review:this.review})},sendMsg(){this.msg.from=this.userFullname,w.emit(S.addMsg,this.msg),this.msg={from:"",txt:""}},addMsg(t){this.msgs.push(t)},setUserTyping(t){this.typingUser=t},setChat(t){console.log(t),t.length&&(this.msgs=t)}},watch:{"msg.txt":{handler(){this.msg.txt?w.emit(S.currUserTyping,this.userFullname):w.emit(S.finishedTyping)}}}},pt={class:"toy-page"},mt={key:0,class:"main"},ht=i("h3",null,"Labels:",-1),gt={key:0},ft=i("h3",null,"Reviews:",-1),_t=i("h1",null,"Add a review",-1),vt=i("h4",null,"Review:",-1),wt=i("button",null,"Submit review",-1),bt={class:"toy-chat"},St={key:0},Tt=i("button",null,"Send",-1);function $t(t,e,o,l,r,s){return d(),c("section",pt,[s.toy?(d(),c("section",mt,[i("h2",null,g(s.toy.name),1),i("h4",null,"Price: "+g(s.toy.price),1),i("h4",null,"Created At: "+g(s.toyCreated),1),ht,i("ul",null,[(d(!0),c(b,null,U(s.toy.labels,n=>(d(),c("li",{key:n},[i("p",null,g(n),1)]))),128))]),s.reviews?(d(),c("div",gt,[ft,(d(!0),c(b,null,U(s.reviews,n=>(d(),c("div",{class:"toy-review",key:n._id},[i("p",null,"Review by: "+g(n.byUser?n.byUser.fullname:s.userFullname),1),i("p",null,g(n.txt),1)]))),128))])):T("",!0),_t,i("form",{onSubmit:e[2]||(e[2]=x((...n)=>s.addReview&&s.addReview(...n),["prevent"]))},[i("label",null,[vt,$(i("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>r.review.txt=n),onInput:e[1]||(e[1]=(...n)=>t.userTyping&&t.userTyping(...n))},null,544),[[k,r.review.txt]]),wt])],32)])):T("",!0),i("section",bt,[i("ul",null,[(d(!0),c(b,null,U(r.msgs,n=>(d(),c("li",{key:n},g(n.from)+": "+g(n.txt),1))),128))]),r.typingUser?(d(),c("h5",St,g(s.typingUserMsg),1)):T("",!0),i("form",{onSubmit:e[4]||(e[4]=x((...n)=>s.sendMsg&&s.sendMsg(...n),["prevent"]))},[$(i("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=n=>r.msg.txt=n)},null,512),[[k,r.msg.txt]]),Tt],32)])])}var Ut=v(yt,[["render",$t]]);W.register(...Y);const kt=Q({name:"charts",components:{DoughnutChart:X,BubbleChart:ee},data(){return{pricesData:{labels:[],datasets:[{data:[0,0,0,0,0],backgroundColor:["#77CEFF","#0079AF","#123E6B","#97B0C4","#A5C8ED"]}]}}},created(){this.toys.forEach(t=>{t.labels.forEach(e=>{e&&!this.pricesData.labels.includes(e)&&this.pricesData.labels.push(e)})}),this.pricesData.labels.forEach((t,e)=>{this.toys.forEach(o=>{o.labels.includes(t)&&(this.pricesData.datasets[0].data[e]+=o.price)})})},methods:{},computed:{toys(){return this.$store.getters.toysForDisplay}}}),xt={class:"main"},Ct=i("h1",null,"Prices By Toy Labels:",-1);function Vt(t,e,o,l,r,s){const n=h("DoughnutChart");return d(),c("div",xt,[Ct,u(n,{chartData:t.pricesData},null,8,["chartData"])])}var Bt=v(kt,[["render",Vt]]);const N=te({history:oe("/"),routes:[{path:"/",name:"login",component:ot},{path:"/toy",name:"toyApp",component:M},{path:"/edit/:toyId",name:"toyEdit",component:ut},{path:"/toy/:toyId",name:"toyDetails",component:Ut},{path:"/toy/chart",name:"toyChart",component:Bt}]}),C={loadToys:Lt,removeToy:Dt,save:Ft,getToyById:Rt};async function Lt(){try{return await _.get("toy/")}catch(t){console.log("Couldn't get toys:",t)}}async function Rt(t){try{return await _.get(`toy/${t}/`)}catch(e){console.log("Couldn't get toy:",e)}}async function Ft(t){try{return t._id?await _.put("toy/",t):await _.post("toy/",t)}catch(e){console.log("Couldn't save toy:",e)}}async function Dt(t){try{return await _.delete(`toy/${t}/`)}catch(e){console.log("Couldn't get toys:",e)}}const It={state(){return{currToy:null,toys:[],filterBy:null,sortBy:null}},mutations:{loadToys(t,{toys:e}){t.toys=e},removeToy(t,{toyId:e}){const o=t.toys.findIndex(l=>l._id===e);t.toys.splice(o,1)},setFilter(t,{filterBy:e}){t.filterBy=e},addToy(t,{newToy:e}){t.toys.unshift(e)},editToy(t,{toy:e}){const o=t.toys.findIndex(l=>l._id===e._id);t.toys.splice(o,1,e)},setCurrToy(t,{toy:e}){t.currToy=D({},e)},setSort(t,{sortBy:e}){t.sortBy=e}},actions:{loadToys({commit:t}){C.loadToys().then(e=>{t({type:"loadToys",toys:e})})},removeToy({commit:t},{toyId:e}){C.removeToy(e).then(()=>{t({type:"removeToy",toyId:e})})},addToy({commit:t},{toyToAdd:e}){C.save(e).then(o=>{t({type:"addToy",newToy:o})})},editToy({commit:t},{toy:e}){return C.save(e).then(o=>{t({type:"editToy",toy:o})})},setCurrToy({commit:t},{id:e}){return C.getToyById(e).then(o=>t({type:"setCurrToy",toy:o}))}},getters:{filteredToys(t){if(!t.toys)return;let e=JSON.parse(JSON.stringify(t.toys));if(!t.filterBy&&!t.sortBy)return e;if(t.filterBy){if(t.filterBy.name){const o=new RegExp(t.filterBy.name,"i");e=e.filter(l=>o.test(l.name))}t.filterBy.labels.length&&(e=e.filter(o=>o.labels.some(l=>t.filterBy.labels.includes(l)))),e=e.filter(o=>o.inStock===t.filterBy.inStock)}return t.sortBy==="abc"?e.sort((o,l)=>o.name.toLowerCase()<l.name.toLowerCase()?-1:o.name.toLowerCase()>l.name.toLowerCase()?1:0):e.sort((o,l)=>o.price-l.price),e},toysForDisplay(t){return JSON.parse(JSON.stringify(t.toys))},currToy(t){return JSON.parse(JSON.stringify(t.currToy))},toyLabels(){return["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"]}}},L={signup:Et,login:Ot,logout:At,loadFromStorage:Mt},P="USER";async function Et(t){try{const e=await _.post("auth/signup",t);return console.log("backend works"),await J(e),e}catch(e){throw e}}async function Ot(t){try{const e=await _.post("auth/login",t);return await J(e),e}catch(e){throw e}}async function At(){try{return await Nt(),await _.post("auth/logout")}catch(t){throw t}}async function J(t){return sessionStorage.setItem(P,JSON.stringify(t)),Promise.resolve()}async function Mt(){let t=sessionStorage.getItem(P);if(!!t)return t=JSON.parse(t),t}async function Nt(){return sessionStorage.clear(),Promise.resolve()}const Pt={state(){return{loggedInUser:null}},mutations:{login(t,{user:e}){t.loggedInUser=e},logout(t){t.loggedInUser=null}},actions:{async signup({commit:t},{newUser:e}){try{const o=await L.signup(e);t({type:"login",user:o})}catch(o){throw o}},async login({commit:t},{loginUser:e}){try{const o=await L.login(e);t({type:"login",user:o})}catch(o){throw o}},async logout({commit:t}){await L.logout(),t("logout")},async loadUser({commit:t}){const e=await L.loadFromStorage();!e||t({type:"login",user:e})}},getters:{currUser(t){if(t.loggedInUser)return JSON.parse(JSON.stringify(t.loggedInUser))}}},A={getReviews:Jt,addReview:jt,deleteReview:qt};async function Jt(t={}){try{return await _.get("review/",t)}catch(e){return Promise.reject(e)}}async function jt(t){try{return await _.post("review/",t)}catch(e){return Promise.reject(e)}}async function qt(t){try{await _.delete("review/"+t);return}catch(e){return Promise.reject(e)}}const zt={state(){return{reviews:[]}},mutations:{loadReviews(t,{reviews:e}){t.reviews=e},addReview(t,{reviewToAdd:e}){t.reviews.unshift(e)}},actions:{async loadToyReviews({commit:t},{toyId:e}){const o=await A.getReviews({byToyId:e});t({type:"loadReviews",reviews:o})},async addReview({commit:t},{review:e}){try{const o=await A.addReview(e);t({type:"addReview",reviewToAdd:o})}catch(o){console.log(o)}}},getters:{reviewsForDisplay(t){if(t.reviews.length||t.reviews)return JSON.parse(JSON.stringify(t.reviews))}}},Ht=se({strict:!0,modules:{toyStore:It,userStore:Pt,reviewStore:zt}});const F=re(ze);F.use(ne);F.use(N);F.use(Ht);F.mount("#app");
