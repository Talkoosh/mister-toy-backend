var O=Object.defineProperty;var w=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var D=(t,e,o)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,x=(t,e)=>{for(var o in e||(e={}))I.call(e,o)&&D(t,o,e[o]);if(w)for(var o of w(e))N.call(e,o)&&D(t,o,e[o]);return t};import{r as y,o as a,c as u,a as p,w as g,b as h,t as f,F as v,d as T,e as l,f as V,g as b,v as S,h as E,i as F,j as P,C as U,k as J,l as R,D as z,B as M,m as H,n as j,p as C,q,s as Z,u as K}from"./vendor.7f78c868.js";const W=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};W();var _=(t,e)=>{const o=t.__vccOpts||t;for(const[i,n]of e)o[i]=n;return o};const G={},Q={class:"app-header"},X=h("Toys"),Y=h("Chart");function ee(t,e){const o=y("router-link");return a(),u("section",Q,[p(o,{to:"/"},{default:g(()=>[X]),_:1}),p(o,{to:"/toy/chart"},{default:g(()=>[Y]),_:1})])}var te=_(G,[["render",ee]]);const oe={props:{toy:Object},methods:{removeToy(t){this.$emit("toy-remove",t)}}},re=h(`
`),ne=h(`
        `),se=h(`
        `),le=h("Details"),ie=h(`
    `);function ae(t,e,o,i,n,r){const s=y("router-link");return a(),u("pre",null,[re,p(s,{to:"/edit/"+o.toy._id},{default:g(()=>[h(f(o.toy.name)+" ",1)]),_:1},8,["to"]),h("  | "+f(o.toy.price)+" | ",1),(a(!0),u(v,null,T(o.toy.labels,d=>(a(),u("span",{key:d},f(d)+",",1))),128)),ne,l("button",{onClick:e[0]||(e[0]=d=>r.removeToy(o.toy._id))},"Remove"),se,p(s,{to:"/toy/"+o.toy._id},{default:g(()=>[le]),_:1},8,["to"]),ie])}var ue=_(oe,[["render",ae]]);const ce={props:{toys:Array},components:{toyPreview:ue},methods:{removeToy(t){this.$emit("toy-remove",t)}}};function de(t,e,o,i,n,r){const s=y("toy-preview");return a(),u("section",null,[l("ul",null,[(a(!0),u(v,null,T(o.toys,d=>(a(),u("li",{key:d._id},[p(s,{onToyRemove:r.removeToy,toy:d},null,8,["onToyRemove","toy"])]))),128))])])}var ye=_(ce,[["render",de]]);const pe={data(){return{filterBy:{name:"",inStock:!0,labels:[]}}},methods:{setFilter(){this.$emit("filter-set",x({},this.filterBy))},setSort(t){this.$emit("sort-set",t)}},computed:{labels(){return this.$store.getters.toyLabels}},watch:{"filterBy.inStock"(){this.setFilter()}}},me={class:"toy-filter"},_e=l("h2",null,"Filter:",-1),he=l("h2",null,"Sort:",-1),fe=l("label",{for:"sortA-Z"},"ABC",-1),ve=l("label",{for:"sortPrice"},"Price",-1);function Te(t,e,o,i,n,r){const s=y("el-input"),d=y("el-option"),c=y("el-select"),L=y("el-checkbox");return a(),u("section",me,[_e,l("div",null,[p(s,{modelValue:n.filterBy.name,"onUpdate:modelValue":e[0]||(e[0]=m=>n.filterBy.name=m),placeholder:"Please input",onInput:r.setFilter,clearable:""},null,8,["modelValue","onInput"]),p(c,{onChange:r.setFilter,multiple:"",modelValue:n.filterBy.labels,"onUpdate:modelValue":e[1]||(e[1]=m=>n.filterBy.labels=m),class:"m-2",placeholder:"Select",size:"large"},{default:g(()=>[(a(!0),u(v,null,T(r.labels,m=>(a(),V(d,{key:m,label:m,value:m},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"]),p(L,{modelValue:n.filterBy.inStock,"onUpdate:modelValue":e[2]||(e[2]=m=>n.filterBy.inStock=m),label:"in stock",size:"large"},null,8,["modelValue"])]),he,l("div",null,[l("input",{type:"radio",name:"sortInput",id:"sortA-Z",onInput:e[3]||(e[3]=m=>r.setSort("abc"))},null,32),fe,l("input",{type:"radio",name:"sortInput",id:"sortPrice",onInput:e[4]||(e[4]=m=>r.setSort("price"))},null,32),ve])])}var be=_(pe,[["render",Te]]);const ge={data(){return{toy:{name:"",price:null,labels:[],inStock:!0}}},methods:{addToy(){this.toy.createdAt=Date.now(),this.$emit("toy-add",JSON.parse(JSON.stringify(this.toy)))}},computed:{labels(){return this.$store.getters.toyLabels}}},$e=l("button",null,"Save",-1);function Se(t,e,o,i,n,r){const s=y("el-option"),d=y("el-select");return a(),u("form",{onSubmit:e[4]||(e[4]=F((...c)=>r.addToy&&r.addToy(...c),["prevent"]))},[b(l("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>n.toy.name=c)},null,512),[[S,n.toy.name]]),b(l("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=c=>n.toy.price=c)},null,512),[[S,n.toy.price]]),b(l("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=c=>n.toy.inStock=c)},null,512),[[E,n.toy.inStock]]),p(d,{multiple:"",modelValue:n.toy.labels,"onUpdate:modelValue":e[3]||(e[3]=c=>n.toy.labels=c),class:"m-2",placeholder:"Select",size:"large"},{default:g(()=>[(a(!0),u(v,null,T(r.labels,c=>(a(),V(s,{key:c,label:c,value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),$e],32)}var Ce=_(ge,[["render",Se]]);const Be={components:{toyList:ye,toyFilter:be,toyAdd:Ce},computed:{toys(){return this.$store.getters.filteredToys}},methods:{addToy(t){this.$store.dispatch({type:"addToy",toyToAdd:t})},removeToy(t){this.$store.dispatch({type:"removeToy",toyId:t})},setFilter(t){this.$store.commit({type:"setFilter",filterBy:t})},setSort(t){this.$store.commit({type:"setSort",sortBy:t})}}},ke={class:"main"};function xe(t,e,o,i,n,r){const s=y("toy-filter"),d=y("toy-list"),c=y("toy-add");return a(),u("section",ke,[p(s,{onSortSet:r.setSort,onFilterSet:r.setFilter},null,8,["onSortSet","onFilterSet"]),p(d,{onToyRemove:r.removeToy,toys:r.toys},null,8,["onToyRemove","toys"]),p(c,{onToyAdd:r.addToy},null,8,["onToyAdd"])])}var A=_(Be,[["render",xe]]);const we={created(){this.$store.dispatch("loadToys")},components:{appHeader:te,toyApp:A}};function De(t,e,o,i,n,r){const s=y("app-header"),d=y("router-view");return a(),u(v,null,[p(s),p(d)],64)}var Ve=_(we,[["render",De]]);const Fe={data(){return{}},created(){this.$store.dispatch({type:"setCurrToy",id:this.$route.params.toyId})},methods:{editToy(){this.$store.dispatch({type:"editToy",toy:this.toy}).then(()=>this.$router.push("/"))}},computed:{toy(){return this.$store.getters.currToy}}},Ae={key:0,class:"main"},Le=["onUpdate:modelValue"],Oe=l("button",null,"Submit",-1);function Ie(t,e,o,i,n,r){return r.toy?(a(),u("section",Ae,[l("form",{onSubmit:e[2]||(e[2]=F((...s)=>r.editToy&&r.editToy(...s),["prevent"]))},[b(l("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>r.toy.name=s)},null,512),[[S,r.toy.name]]),b(l("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=s=>r.toy.price=s)},null,512),[[S,r.toy.price]]),(a(!0),u(v,null,T(r.toy.labels,(s,d)=>(a(),u("span",{key:s},[b(l("input",{type:"text","onUpdate:modelValue":c=>r.toy.labels[d]=c},null,8,Le),[[S,r.toy.labels[d]]])]))),128)),Oe],32)])):P("",!0)}var Ne=_(Fe,[["render",Ie]]);const Ee={created(){this.$store.dispatch({type:"setCurrToy",id:this.$route.params.toyId})},computed:{toy(){return this.$store.getters.currToy},toyCreated(){return new Date(this.toy.createdAt)}}},Pe={class:"main"},Ue=l("h3",null,"Labels:",-1),Je=l("h3",null,"Reviews:",-1);function Re(t,e,o,i,n,r){return a(),u("section",Pe,[l("h2",null,f(r.toy.name),1),l("h4",null,"Price: "+f(r.toy.price),1),l("h4",null,"Created At: "+f(r.toyCreated),1),Ue,l("ul",null,[(a(!0),u(v,null,T(r.toy.labels,s=>(a(),u("li",{key:s},[l("p",null,f(s),1)]))),128))]),Je,l("ul",null,[(a(!0),u(v,null,T(r.toy.reviews,s=>(a(),u("li",{key:s},[l("p",null,f(s),1)]))),128))])])}var ze=_(Ee,[["render",Re]]);U.register(...J);const Me=R({name:"charts",components:{DoughnutChart:z,BubbleChart:M},data(){return{pricesData:{labels:[],datasets:[{data:[0,0,0,0,0],backgroundColor:["#77CEFF","#0079AF","#123E6B","#97B0C4","#A5C8ED"]}]}}},created(){this.toys.forEach(t=>{t.labels.forEach(e=>{e&&!this.pricesData.labels.includes(e)&&this.pricesData.labels.push(e)})}),this.pricesData.labels.forEach((t,e)=>{this.toys.forEach(o=>{o.labels.includes(t)&&(this.pricesData.datasets[0].data[e]+=o.price)})})},methods:{},computed:{toys(){return this.$store.getters.toysForDisplay}}}),He={class:"main"},je=l("h1",null,"Prices By Toy Labels:",-1);function qe(t,e,o,i,n,r){const s=y("DoughnutChart");return a(),u("div",He,[je,p(s,{chartData:t.pricesData},null,8,["chartData"])])}var Ze=_(Me,[["render",qe]]);const Ke=H({history:j("/"),routes:[{path:"/",name:"toyApp",component:A},{path:"/edit/:toyId",name:"toyEdit",component:Ne},{path:"/toy/:toyId",name:"toyDetails",component:ze},{path:"/toy/chart",name:"toyChart",component:Ze}]}),$={loadToys:We,removeToy:Xe,save:Qe,getToyById:Ge},B="/api/toy/";async function We(){try{return(await C.get(B)).data}catch(t){console.log("Couldn't get toys:",t)}}async function Ge(t){try{return(await C.get(B+t)).data}catch(e){console.log("Couldn't get toy:",e)}}async function Qe(t){try{return(t._id?await C.put(B,t):await C.post(B,t)).data}catch(e){console.log("Couldn't save toy:",e)}}async function Xe(t){try{return(await C.delete(B+t)).data}catch(e){console.log("Couldn't get toys:",e)}}const Ye={state(){return{currToy:null,toys:[],filterBy:null,sortBy:null}},mutations:{loadToys(t,{toys:e}){t.toys=e},removeToy(t,{toyId:e}){const o=t.toys.findIndex(i=>i._id===e);t.toys.splice(o,1)},setFilter(t,{filterBy:e}){t.filterBy=e},addToy(t,{newToy:e}){t.toys.unshift(e)},editToy(t,{toy:e}){const o=t.toys.findIndex(i=>i._id===e._id);t.toys.splice(o,1,e)},setCurrToy(t,{toy:e}){t.currToy=x({},e)},setSort(t,{sortBy:e}){t.sortBy=e}},actions:{loadToys({commit:t}){$.loadToys().then(e=>{t({type:"loadToys",toys:e})})},removeToy({commit:t},{toyId:e}){$.removeToy(e).then(()=>{t({type:"removeToy",toyId:e})})},addToy({commit:t},{toyToAdd:e}){$.save(e).then(o=>{t({type:"addToy",newToy:o})})},editToy({commit:t},{toy:e}){return $.save(e).then(o=>{t({type:"editToy",toy:o})})},setCurrToy({commit:t},{id:e}){return $.getToyById(e).then(o=>t({type:"setCurrToy",toy:o}))}},getters:{filteredToys(t){if(!t.toys)return;let e=JSON.parse(JSON.stringify(t.toys));if(!t.filterBy&&!t.sortBy)return e;if(t.filterBy){if(t.filterBy.name){const o=new RegExp(t.filterBy.name,"i");e=e.filter(i=>o.test(i.name))}t.filterBy.labels.length&&(e=e.filter(o=>o.labels.some(i=>t.filterBy.labels.includes(i)))),e=e.filter(o=>o.inStock===t.filterBy.inStock)}return t.sortBy==="abc"?e.sort((o,i)=>o.name.toLowerCase()<i.name.toLowerCase()?-1:o.name.toLowerCase()>i.name.toLowerCase()?1:0):e.sort((o,i)=>o.price-i.price),e},toysForDisplay(t){return JSON.parse(JSON.stringify(t.toys))},currToy(t){return JSON.parse(JSON.stringify(t.currToy))},toyLabels(){return["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"]}}},et=q({strict:!0,modules:{toyStore:Ye}});const k=Z(Ve);k.use(K);k.use(Ke);k.use(et);k.mount("#app");
